<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->

    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="bootstrap.css" />
    <link rel="manifest" href="Adi-app.webmanifest">
    <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase.js"></script>
    <script>
	  // Initialize Firebase
	  var config = {
	    apiKey: "AIzaSyBf93BVzxnWkD0XbYbdapel5s_iq8reRm8",
	    authDomain: "adi-app-b3698.firebaseapp.com",
	    databaseURL: "https://adi-app-b3698.firebaseio.com",
	    projectId: "adi-app-b3698",
	    storageBucket: "adi-app-b3698.appspot.com",
	    messagingSenderId: "642187156042"
	  };
	  firebase.initializeApp(config);
    </script>

    <title>User Interface</title>
</head>

<body>
  <header>
      <nav class="container navbar navbar-expand-sm navbar-dark bg-dark">
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo03" aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
           <span class="navbar-toggler-icon"></span>
          </button>
          <a class="navbar-brand" href="index.html">
          
          </a>

          <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
              <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                  <li class="nav-item ">
                      <a class="nav-link active" href="index.html">Acceil <span class="sr-only">(current)</a>
                  </li>
                  <li class="nav-item ">
                      <a class="nav-link" href="formInsc.html">Inscription </span></a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link" href="ArrayOfUsers.html">Utilisateurs </span></a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link " href="#">Aide</a>
                  </li>
              </ul>
              <form class="form-inline my-2 my-lg-0">
                  <input class="form-control mr-sm-2" type="search" placeholder="Search">
                  <button class="btn btn-outline-success my-2 my-sm-0" type="submit">chercher</button>
              </form>
          </div>
      </nav>
  </header>
    <main>
        <div class="container  d-flex justify-content-center bg-light">



            <div class=" col-sm-4 bg-light">

                <!-- +++++++++++ Formulaire *************-->
                <form autocomplete="off">

                    <div id="userProfPhoto" class="form-group form-check d-flex justify-content-center"></div>

                    
                    <div class="form-group">
                        <label for="exampleInputEmail1">Utilsateur</label>
                        <input type="text" class="form-control user" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Nom Utilisateur" required>
                    </div>
                    <div class="form-group" id="pwd">
                        <label for="exampleInputPassword1">Password</label>
                        <input type="password" class="form-control pwd" id="exampleInputPassword1" placeholder="Password" required p>
                    </div>
                    <div class="form-group form-check">
                        <input type="checkbox" class="form-check-input" id="exampleCheck1">
                        <label class="form-check-label" for="exampleCheck1">Se souvient de moi</label>
                    </div>
                    <div class="form-group form-check d-flex justify-content-center">
                        <input type="submit" role="button" class="btn btn-primary btn-md" id="submit">
                    </div>
                    <div class="form-group form-check d-flex justify-content-center">
                      <p class="text-muted">Vous n'avez pas de compte ?</p>
                    </div>
                    <div class="form-group form-check d-flex justify-content-center">
                      <a href="formInsc.html"><button type="button" class="btn btn-link">Créer un compte</button></a>
                    </div>
                    <!--***************** Alert Message ********************-->
                    <div class="form-group form-check alert alert-danger" role="alert" id="alert" hidden>
                    <strong>Désolé!</strong> Mots de passe incorrecte
                    </div>
                    <!--********************************************-->

                </form>
                <!--********************************************-->
                <!--***************** keyboard *******************-->
                <div id="numKeyboard" hidden>
                </div>

                <!--***************  *****************************-->
		    <!--*************** id="installAppBtn" *****************************-->
-                 <button class="btn btn-success" id="installAppBtn">Télecharger App</button>
-		 <button class="btn btn-success" id="notifications">Get The permession to notif</button>
             <form>
		Notification payload: <input id='notification-payload' type='text' value='Insert here a payload'></input>
		Notification delay: <input id='notification-delay' type='number' value='5'></input> seconds
		Notification Time-To-Live: <input id='notification-ttl' type='number' value='0'></input> seconds
	     </form>

<button id="doIt">Request sending a notification!</button>

		    

                <!--**************** Users Box *********************-->
                <div id="userBox" hidden></div>
                <!--********************************************-->





            </div>

        </div>

    </main>
    <footer>

	</footer>



    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="jquery-3.3.1.min.js"></script>
    <script src="popper.min.js"></script>
    <script src="bootstrap.js"></script>
    <script src="program.js"></script>
    <script src="app.js"></script>
   <!-- Firebase App is always required and must be first -->
	<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-app.js"></script>

	<!-- Add additional services you want to use -->
	<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-auth.js"></script>
	<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-database.js"></script>
	<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-firestore.js"></script>
	<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-messaging.js"></script>
	<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-functions.js"></script>

	<!-- Comment out (or don't include) services you don't want to use -->
	<!-- <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-storage.js"></script> -->

	<script>
		// Initialize the default app
	var defaultApp = admin.initializeApp(defaultAppConfig);

	console.log(defaultApp.name);  // "[DEFAULT]"

	// Retrieve services via the defaultApp variable...
	var defaultAuth = defaultApp.auth();
	var defaultDatabase = defaultApp.database();

	// ... or use the equivalent shorthand notation
	defaultAuth = admin.auth();
	defaultDatabase = admin.database();
		
	  // Retrieve Firebase Messaging object.
	const messaging = firebase.messaging();
	// Add the public key generated from the console here.
	messaging.usePublicVapidKey("BIS-utsXNZDY5rcU3OeKUKki5cycQN9NJ17ENhNeuh096qqLDNzdhx7AVjPA7G6abWV-yQJTj4qFArnzYpoolE8");	
	messaging.requestPermission().then(function() {
	console.log('Notification permission granted.');
		
	// TODO(developer): Retrieve an Instance ID token for use with FCM.
	// ...
	}).catch(function(err) {
	console.log('Unable to get permission to notify.', err);
	});
	
	// Get Instance ID token. Initially this makes a network call, once retrieved
	// subsequent calls to getToken will return from cache.
	messaging.getToken().then(function(currentToken) {
	if (currentToken) {
	sendTokenToServer(currentToken);
	updateUIForPushEnabled(currentToken);
	} else {
	// Show permission request.
	console.log('No Instance ID token available. Request permission to generate one.');
	// Show permission UI.
	updateUIForPushPermissionRequired();
	setTokenSentToServer(false);
	}
	}).catch(function(err) {
	console.log('An error occurred while retrieving token. ', err);
	showToken('Error retrieving Instance ID token. ', err);
	setTokenSentToServer(false);
	});
		
	// Callback fired if Instance ID token is updated.
	messaging.onTokenRefresh(function() {
	  messaging.getToken().then(function(refreshedToken) {
	    console.log('Token refreshed.');
	    // Indicate that the new Instance ID token has not yet been sent to the
	    // app server.
	    setTokenSentToServer(false);
	    // Send Instance ID token to app server.
	    sendTokenToServer(refreshedToken);
	    // ...
	  }).catch(function(err) {
	    console.log('Unable to retrieve refreshed token ', err);
	    showToken('Unable to retrieve refreshed token ', err);
	  });
	});
	</script>

</body>


</html>
